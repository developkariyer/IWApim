<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Minimal Product Catalog</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    
    <style>
        body {
            background-color: black;
        }

        .product-card {
            background-color: #f5f5f5;
            height: 120px;
            overflow: hidden;
            margin-bottom: 1px; /* Ensure 1px spacing between cards */
            box-shadow: none; /* Remove shadow to avoid extra space */
            padding: 0;
        }

        .main-image {
            height: 120px;
            width: 100%;
            object-fit: cover;
        }

        .product-info {
            overflow: hidden;
            flex-grow: 1;
            text-overflow: ellipsis;
        }

        .product-gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, 40px);
            grid-gap: 0;
            width: 320px;
            height: 120px;
            border: none;
            overflow: hidden;
            flex-shrink: 0;
        }

        .product-gallery img {
            width: 40px;
            height: 40px;
            object-fit: cover;
            border: none;
            margin: 0;
            padding: 0;
        }

        .page-container {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }

        .row.g-0 {
            margin: 0;
        }
    </style>
</head>
<body>

    <div class="container-fluid">
        <div class="row my-4">
            <div class="col-md-3">
                <select class="form-select" id="category-select">
                    <option selected>Kategori Seçin</option>
                    {% for type in productTypes %}
                        <option value="{{ type }}">{{ type }}</option>
                    {% endfor %}
                </select>        
            </div>
            <div class="col-md-9">
            <input type="text" id="search-box" class="form-control" placeholder="Ürün ile ilgili herhangi bir bilgi girerek ara...">
            </div>
        </div>

        <!-- Product catalog container -->
        <div id="catalog-container">
            {% for product in products %}
                <div class="card mb-4 product-card" style="height: 120px; width: 100%; overflow: hidden; padding: 0; border-radius: 5px;">
                    <table style="table-layout: fixed; width: 100%; height: 100%; border-collapse: collapse; margin: 0; padding: 0; border: none;">
                        <tr>
                            <td style="width: 150px; vertical-align: top; border: none; padding: 0;">
                                <div style="height: 120px; width: 150px;">
                                    <img src="{{ product.image }}" alt="Product Image" style="height: 100%; max-width: 150px; width: auto; display: block;">
                                </div>
                            </td>                                                        
                            <td style="vertical-align: top; border: none; padding: 3px; overflow: hidden;">
                                <div class="card-body product-info" style="padding: 0;">
                                    <h5 class="card-title">{{ product.productIdentifier }} {{ product.name }}</h5>
                                    <div class="col-12" style="font-size: smaller;">
                                        <b>Ebatlar:</b> {{ product.variationSizeList }} * <b>Renkler:</b> {{ product.variationColorList }}<br>
                                        <b>Pazaryerleri:</b>
                                            {% for listing in product.listings %}
                                                {{ listing|raw }} |
                                            {% endfor %}
                                    </div>
                                    </div>
                                </div>
                            </td>
                            <td style="width: 320px; vertical-align: top; border: none; padding: 0;">
                                <div class="product-gallery">
                                    {% for image in product.album %}
                                        <img src="{{ image }}" alt="thumb1">
                                    {% endfor %}
                                </div>
                            </td>
                        </tr>
                    </table>
                </div>
            {% endfor %}
        </div>

        <!-- Pagination -->
        <div class="page-container">
            <nav>
                <ul class="pagination">
                    <li class="page-item"><a class="page-link" href="#">Previous</a></li>
                    <li class="page-item"><a class="page-link" href="#">1</a></li>
                    <li class="page-item"><a class="page-link" href="#">2</a></li>
                    <li class="page-item"><a class="page-link" href="#">Next</a></li>
                </ul>
            </nav>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        $(document).ready(function() {
            $('#search-box').on('input', function() {
                let searchQuery = $(this).val();
                // Make AJAX request to fetch product data based on search query
                // Example: $.ajax({ ... });
            });

            $('#category-select').on('change', function() {
                let selectedCategory = $(this).val();
                // Make AJAX request to fetch product data based on selected category
                // Example: $.ajax({ ... });
            });
        });

        document.addEventListener('DOMContentLoaded', function () {
            var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
            var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
                return new bootstrap.Tooltip(tooltipTriggerEl);
            });
        });

    </script>

</body>
</html>
